@using Resource = Resources.Areas.Administration.Contests.Views.Partials.ContestEditor;

@model OJS.Web.Areas.Administration.ViewModels.Contest.ContestAdministrationViewModel

<fieldset>
    <legend>@Resource.General_info</legend>
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.Name)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @Html.EditorFor(m => m.Name, new { @class = "form-control pull-left full-editor" })
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="@Resource.Enter_title" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.Name)
        </div>
    </div>
    <br />
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.Type)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @Html.EditorFor(m => m.Type, new { @class = "form-control pull-left full-editor" })
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="Въведете типа на състезанието" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.Type)
        </div>
    </div>
    <br />
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.CategoryId)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @Html.EditorFor(m => m.CategoryId, new { @class = "form-control pull-left full-editor" })
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="@Resource.Choose_category" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.CategoryId)
        </div>
    </div>
    <br />
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.Description)
            </div>
        </div>
        <div class="editor-field col-xs-8">
            @Html.EditorFor(m => m.Description, new { @class = "form-control pull-left full-editor"})
        </div>
        <div class="editor-field col-xs-1">
            <span class="glyphicon glyphicon-question-sign text-primary" title="@Resource.Enter_description" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.Description)
        </div>
    </div>
    <br />
</fieldset>

<fieldset>
    <legend>@Resource.Duration_info</legend>
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.StartTime)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @Html.EditorFor(m => m.StartTime, new { @class = "form-control pull-left full-editor" })
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="@Resource.Contest_start" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.StartTime)
        </div>
    </div>
    <br />
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.EndTime)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @Html.EditorFor(m => m.EndTime, new { @class = "form-control pull-left full-editor" })
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="@Resource.Contest_end" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.EndTime)
        </div>
    </div>
    <br />
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.PracticeStartTime)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @Html.EditorFor(m => m.PracticeStartTime, new { @class = "form-control pull-left full-editor" })
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="@Resource.Practice_start" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.PracticeStartTime)
        </div>
    </div>
    <br />
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.PracticeEndTime)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @Html.EditorFor(m => m.PracticeEndTime, new { @class = "form-control pull-left full-editor" })
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="@Resource.Practice_end" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.PracticeEndTime)
        </div>
    </div>
    <br />
</fieldset>

<fieldset>
    <legend>@Resource.Passowords_info</legend>
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.ContestPassword)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @Html.EditorFor(m => m.ContestPassword, new { @class = "form-control pull-left full-editor" })
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="@Resource.Contest_password" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.ContestPassword)
        </div>
    </div>
    <br />
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.PracticePassword)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @Html.EditorFor(m => m.PracticePassword, new { @class = "form-control pull-left full-editor" })
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="@Resource.Practice_password" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.PracticePassword)
        </div>
    </div>
    <br />
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.NewIpPassword)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @Html.EditorFor(m => m.NewIpPassword, new { @class = "form-control pull-left full-editor" })
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="Въведете парола за ново IP" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.NewIpPassword)
        </div>
    </div>
    <br />
</fieldset>

<fieldset>
    <legend>@Resource.Options</legend>
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.LimitBetweenSubmissions)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @Html.EditorFor(m => m.LimitBetweenSubmissions, new { @class = "form-control pull-left full-editor" })
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="@Resource.Submissions_limit" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.LimitBetweenSubmissions)
        </div>
    </div>
    <br />
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.OrderBy)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @Html.EditorFor(m => m.OrderBy, new { @class = "form-control pull-left full-editor" })
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="@Resource.Contest_order" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.OrderBy)
        </div>
    </div>
    <br />
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.IsVisible)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @Html.EditorFor(m => m.IsVisible, new { @class = "form-control pull-left full-editor" })
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="@Resource.Contest_visibility" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.IsVisible)
        </div>
    </div>
    <br />  
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.AllowedIps)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @(Html.Kendo().AutoCompleteFor(x => Model.AllowedIps)
                .DataTextField("Value")
                .Value(Model.RawAllowedIps)
                .Placeholder("Въведете позволени IP-та (разделени със ',')")
                .Filter(FilterType.Contains)
                .Separator(",")
                .DataSource(dataSource => dataSource
                    .ServerFiltering(true)
                    .Read(read => read.Action("ReadIpsContaining", "Contests").Data("onContestIpData")))
                    .HtmlAttributes(new { style = "width: 100%" })
            )
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="Въведете позволените IP-та за състезанието (разделени със ',')" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.AllowedIps)
        </div>
    </div>
    <br />
    <div class="row">
        <div class="editor-label col-xs-3">
            <div class="pull-right">
                @Html.LabelFor(m => m.AutoChangeTestsFeedbackVisibility)
            </div>
        </div>
        <div class="editor-field col-xs-4">
            @Html.EditorFor(m => m.AutoChangeTestsFeedbackVisibility, new { @class = "form-control pull-left full-editor" })
        </div>
        <div class="editor-field col-xs-4">
            <span class="glyphicon glyphicon-question-sign text-primary" title="@Resource.Auto_change_tests" data-tooltip="true"></span>
            @Html.ValidationMessageFor(m => m.AutoChangeTestsFeedbackVisibility)
        </div>
    </div>
    <br />
</fieldset>

<script>
    function onContestIpData() {
        var ips = $('#AllowedIps').val().split(', ');
        return {
            value: ips.length ? ips[ips.length - 1] : ''
        };
    }
</script>
<script>
    
    $(function () {
        var categoryName ="@Model.CategoryName";
        if (categoryName !== "" && typeof categoryName !== typeof undefined) {
            $("#CategoryId").data("kendoComboBox").text(categoryName);
        }
        
    });
</script>